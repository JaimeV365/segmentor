<!DOCTYPE html>
<html lang="en">
<head>
<link rel="preload" href="/fonts/Montserrat-Bold.ttf" as="font" type="font/ttf" crossorigin="anonymous">
<link rel="preload" href="/fonts/Jaro-Regular.ttf" as="font" type="font/ttf" crossorigin="anonymous">




<style>
/* Font Face Declarations - Using Local Fonts */
@font-face {
  font-family: 'Montserrat';
  src: url('/fonts/Montserrat-Bold.ttf') format('truetype');
  font-weight: 700;
  font-style: normal;
  font-display: swap;
}

@font-face {
  font-family: 'Jaro';
  src: url('/fonts/Jaro-Regular.ttf') format('truetype');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

.main-navigation {
  background: #fff;
  border-bottom: 1px solid #e5e7eb;
  padding: 1rem 0;
  position: sticky;
  top: 0;
  z-index: 1000;
}

.nav-container {
  max-width: 1200px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0 1rem;
}

.nav-logo {
  font-size: 1.5rem;
  font-weight: 700;
}

.logo-text {
  text-decoration: none;
  display: flex;
  align-items: baseline;
  gap: 0;
  color: #333333;
  font-family: 'Montserrat', sans-serif;
}

.logo-segmentor {
  font-family: 'Montserrat', sans-serif;
  font-weight: 700;
  color: #333333;
}

.logo-m {
  color: #3a863e;
}

.logo-app {
  font-family: 'Jaro', sans-serif;
  color: #3a863e;
  text-transform: uppercase;
  font-size: 0.6em;
  vertical-align: baseline;
  display: inline-block;
  margin-left: 2px;
}

.nav-links {
  display: flex;
  gap: 2rem;
  align-items: center;
}

.nav-link {
  text-decoration: none;
  color: #374151;
  font-weight: 500;
  transition: color 0.2s;
}

.nav-link:hover {
  color: #3a863e;
}

.nav-link-primary {
  background: #3a863e;
  color: white !important;
  padding: 0.5rem 1rem;
  border-radius: 0.375rem;
}

.nav-link-primary:hover {
  background: #2d6b31;
}

@media (max-width: 768px) {
  .nav-container {
    flex-direction: column;
    gap: 1rem;
  }
  
  .nav-links {
    gap: 1rem;
  }
}



.expectation-item p {
            color: #6b7280;
            line-height: 1.6;
        }

        @media (max-width: 768px) {
            .query-types {
                grid-template-columns: 1fr;
            }

            .expectations-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>

    <!-- Qualtrics Embedded Data Handler -->
    <script>
        // Function to show error message when Qualtrics fails to load
        function showQualtricsError() {
            var targetDiv = document.getElementById('ZN_11X8CuCOswXGKnC');
            if (targetDiv && targetDiv.children.length === 0) {
                var errorMsg = document.createElement('div');
                errorMsg.style.cssText = 'padding: 24px; background: #fef2f2; border: 1px solid #fecaca; border-radius: 8px; color: #991b1b;';
                errorMsg.innerHTML = '<strong>⚠️ Contact form unavailable</strong><br><br>' +
                    'The contact form could not be loaded. This may be because:<br>' +
                    '• <strong>Firefox Enhanced Tracking Protection</strong> is blocking the form (most common)<br>' +
                    '• Browser privacy extensions are blocking third-party scripts<br>' +
                    '• Network or firewall restrictions<br><br>' +
                    '<strong>To fix:</strong> Disable Enhanced Tracking Protection for this site, or try a different browser.';
                targetDiv.appendChild(errorMsg);
            }
        }
        
        // Monitor for Qualtrics chunk loading failures
        window.addEventListener('error', function(e) {
            if (e.target && e.target.src && e.target.src.includes('siteintercept.qualtrics.com')) {
                console.error('❌ Qualtrics chunk failed to load:', e.target.src);
                console.error('   Current domain:', window.location.hostname);
                console.error('   Error details:', {
                    message: e.message,
                    filename: e.filename,
                    lineno: e.lineno,
                    colno: e.colno,
                    error: e.error
                });
                console.error('   Common causes:');
                console.error('   1. Firefox Enhanced Tracking Protection (most common)');
                console.error('   2. Browser privacy extensions blocking third-party scripts');
                console.error('   3. CSP headers blocking the request (check Network tab)');
                console.error('   4. Network/firewall restrictions');
                
                // Try to fetch the script URL directly to see the actual error
                fetch(e.target.src)
                    .then(response => {
                        console.error('   Script URL Response Status:', response.status, response.statusText);
                        console.error('   Response Headers:', Object.fromEntries(response.headers.entries()));
                        return response.text();
                    })
                    .then(text => {
                        console.error('   Response Preview:', text.substring(0, 200));
                    })
                    .catch(fetchError => {
                        console.error('   Fetch Error:', fetchError);
                        console.error('   Error Type:', fetchError.name);
                        console.error('   Error Message:', fetchError.message);
                        if (fetchError.message.includes('Failed to fetch') || fetchError.message.includes('ERR_NAME_NOT_RESOLVED')) {
                            console.error('   ⚠️ DNS Resolution Error - The Qualtrics subdomain may not exist.');
                            console.error('   This usually means:');
                            console.error('   1. The intercept is not activated/published in Qualtrics');
                            console.error('   2. The Zone ID or deployment code is incorrect');
                            console.error('   3. The project needs to be re-deployed in Qualtrics');
                        }
                    });
                
                // Only show error if Qualtrics hasn't loaded after a delay
                setTimeout(function() {
                    if (typeof Qualtrics === 'undefined') {
                        showQualtricsError();
                    }
                }, 5000);
            }
        }, true);
        
        // Function to check Qualtrics status
        function checkQualtricsStatus() {
            console.log('=== Qualtrics Status Check ===');
            console.log('Current domain:', window.location.hostname);
            console.log('Qualtrics object exists:', typeof Qualtrics !== 'undefined');
            if (typeof Qualtrics !== 'undefined') {
                console.log('Qualtrics.SiteIntercept exists:', typeof Qualtrics.SiteIntercept !== 'undefined');
                console.log('Qualtrics.SurveyEngine exists:', typeof Qualtrics.SurveyEngine !== 'undefined');
            }
            console.log('Target div exists:', document.getElementById('ZN_11X8CuCOswXGKnC') !== null);
            var targetDiv = document.getElementById('ZN_11X8CuCOswXGKnC');
            if (targetDiv) {
                console.log('Target div content:', targetDiv.innerHTML.substring(0, 100));
                console.log('Target div has children:', targetDiv.children.length);
            }
            console.log('============================');
        }
        
        // Expose check function globally for debugging
        window.checkQualtricsStatus = checkQualtricsStatus;
        
        // Check status after page loads
        window.addEventListener('load', function() {
            setTimeout(function() {
                checkQualtricsStatus();
                // If Qualtrics still hasn't loaded after 5 seconds, show error
                setTimeout(function() {
                    if (typeof Qualtrics === 'undefined') {
                        var targetDiv = document.getElementById('ZN_11X8CuCOswXGKnC');
                        if (targetDiv && targetDiv.children.length === 0) {
                            console.error('❌ Qualtrics failed to load after 5 seconds');
                            showQualtricsError();
                        }
                    }
                }, 3000);
            }, 2000);
        });
        
        // Store the selected block value
        let selectedBlock = null;

        // Function to handle query type button clicks
        function handleQueryTypeClick(blockValue) {
            console.log('Button clicked! Block value:', blockValue);
            
            // Store the block value for Qualtrics
            selectedBlock = blockValue;
            
            // Store in sessionStorage for Qualtrics to access
            sessionStorage.setItem('QualtricsBlock', blockValue);
            console.log('Stored in sessionStorage:', blockValue);
            
            // Show the survey section
            const surveySection = document.getElementById('survey-section');
            console.log('Survey section element:', surveySection);
            
            if (surveySection) {
                // Show the section
                surveySection.style.display = 'block';
                
                // Get the title element to scroll to it
                const titleElement = document.getElementById('contact-form-heading');
                
                // Small delay to ensure the section is rendered before scrolling
                setTimeout(() => {
                    if (titleElement) {
                        // Calculate offset for sticky header (approximately 80px)
                        const headerOffset = 80;
                        const elementPosition = titleElement.getBoundingClientRect().top;
                        const offsetPosition = elementPosition + window.pageYOffset - headerOffset;
                        
                        // Scroll to the title with offset
                        window.scrollTo({
                            top: offsetPosition,
                            behavior: 'smooth'
                        });
                        console.log('Scrolled to title element');
                    } else {
                        // Fallback: scroll to section if title not found
                        surveySection.scrollIntoView({ 
                            behavior: 'smooth', 
                            block: 'start' 
                        });
                    }
                    
                    // Check Qualtrics status when section becomes visible
                    console.log('Checking Qualtrics status...');
                    checkQualtricsStatus();
                    
                    // Set Qualtrics embedded data if Qualtrics is loaded
                    console.log('Setting Qualtrics embedded data:', blockValue);
                    setQualtricsEmbeddedData(blockValue);
                    // Also start watching for Qualtrics to load
                    watchForQualtrics(blockValue);
                }, 100);
            } else {
                console.error('Survey section not found! ID: survey-section');
            }
        }
        
        // Make function globally accessible
        window.handleQueryTypeClick = handleQueryTypeClick;

        // Function to set Qualtrics embedded data
        function setQualtricsEmbeddedData(blockValue) {
            console.log('setQualtricsEmbeddedData called with:', blockValue);
            console.log('Qualtrics object available:', typeof Qualtrics !== 'undefined');
            
            // Method 1: For Qualtrics Site Intercept API
            if (typeof Qualtrics !== 'undefined' && Qualtrics.SiteIntercept) {
                try {
                    Qualtrics.SiteIntercept.setEmbeddedData('Block', blockValue);
                    console.log('✓ Qualtrics Site Intercept embedded data set:', blockValue);
                } catch (e) {
                    console.log('✗ Qualtrics Site Intercept API not ready yet:', e);
                }
            } else {
                console.log('Qualtrics.SiteIntercept not available yet');
            }
            
            // Method 2: Store for when intercept loads
            window.QualtricsBlock = blockValue;
            console.log('Stored in window.QualtricsBlock:', blockValue);
            
            // Method 3: Try to set via Qualtrics global object if available
            if (typeof Qualtrics !== 'undefined') {
                try {
                    if (Qualtrics.SiteIntercept) {
                        Qualtrics.SiteIntercept.setEmbeddedData('Block', blockValue);
                        console.log('✓ Set via Qualtrics.SiteIntercept');
                    } else if (Qualtrics.SurveyEngine) {
                        Qualtrics.SurveyEngine.setEmbeddedData('Block', blockValue);
                        console.log('✓ Set via Qualtrics.SurveyEngine');
                    }
                } catch (e) {
                    console.log('✗ Error setting Qualtrics embedded data:', e);
                }
            }
        }

        // Watch for Qualtrics to become available after button click
        function watchForQualtrics(blockValue) {
            let attempts = 0;
            const maxAttempts = 50; // 10 seconds
            
            const checkInterval = setInterval(function() {
                attempts++;
                
                if (typeof Qualtrics !== 'undefined' && Qualtrics.SiteIntercept) {
                    try {
                        Qualtrics.SiteIntercept.setEmbeddedData('Block', blockValue);
                        console.log('✓ Qualtrics loaded and embedded data set:', blockValue);
                        clearInterval(checkInterval);
                    } catch (e) {
                        console.log('Error setting embedded data:', e);
                    }
                } else if (attempts >= maxAttempts) {
                    console.warn('Qualtrics not available after button click. Domain may not be whitelisted.');
                    showQualtricsError();
                    clearInterval(checkInterval);
                }
            }, 200);
        }

        // Add event listeners as backup (in case onclick doesn't work)
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM loaded, setting up button listeners');
            
            const buttons = document.querySelectorAll('.query-type-card');
            console.log('Found buttons:', buttons.length);
            
            buttons.forEach(function(button) {
                const blockValue = button.getAttribute('data-block');
                console.log('Setting up listener for button with block:', blockValue);
                
                // Add click event listener
                button.addEventListener('click', function(e) {
                    e.preventDefault();
                    console.log('Button clicked via event listener, block:', blockValue);
                    handleQueryTypeClick(blockValue);
                });
            });
        });

        // Continuously check for Qualtrics to load and set embedded data
        (function checkQualtricsLoaded() {
            if (typeof Qualtrics !== 'undefined' && Qualtrics.SiteIntercept) {
                const storedBlock = sessionStorage.getItem('QualtricsBlock') || window.QualtricsBlock;
                if (storedBlock) {
                    try {
                        Qualtrics.SiteIntercept.setEmbeddedData('Block', storedBlock);
                        console.log('✓ Site Intercept embedded data set on load:', storedBlock);
                        // Stop checking once successfully set
                        return;
                    } catch (e) {
                        console.log('Error setting Site Intercept embedded data:', e);
                    }
                }
            }
            
            // Check again in 200ms if Qualtrics isn't loaded yet (up to 10 seconds)
            const checkCount = checkQualtricsLoaded.count || 0;
            if (checkCount < 50) { // 50 * 200ms = 10 seconds max
                checkQualtricsLoaded.count = checkCount + 1;
                setTimeout(checkQualtricsLoaded, 200);
            } else {
                console.warn('Qualtrics did not load within 10 seconds. This may be due to domain restrictions. Make sure your domain is whitelisted in Qualtrics settings.');
                showQualtricsError();
            }
        })();

        // Expose function globally for Qualtrics to call
        window.setQualtricsBlock = function(blockValue) {
            handleQueryTypeClick(blockValue);
        };
        
        console.log('Qualtrics handler script loaded');
    </script>
</head>
<body>

<nav class="main-navigation">
  <div class="nav-container">
    <div class="nav-logo">
      <a href="/" class="logo-text">
        <span class="logo-segmentor">seg<span class="logo-m">m</span>entor</span><span class="logo-app">.APP</span>
      </a>
    </div>
    <div class="nav-links">
      <a href="/about.html" class="nav-link">About</a>
      <a href="/faq.html" class="nav-link">FAQ</a>
      <a href="/contact.html" class="nav-link">Contact</a>
      <a href="/tool/" class="nav-link nav-link-primary">Use Tool</a>
    </div>
  </div>
</nav>


</body>
</html>

